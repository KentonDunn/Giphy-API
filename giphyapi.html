<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Kenton's Gif Search</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
        crossorigin="anonymous">



</head>

<body>
    <div class="jumbotron">
        <h1>Choose your gif wisely!</h1>

    </div>


    <div class="container">
        <label for="fighterName">Enter your favorite Street Fighter II character</label>
        <div class="row">
                <div class="col-sm-6">
                  <div class="input-group">
                    <span class="input-group-btn">
                      <button class="btn btn-default" type="button">SHORYUKEN!</button>
                    </span>
                    <input type="text" class="form-control" id="fighterName" placeholder="Search for...">
                  </div><!-- /input-group -->
                </div><!-- /.col-lg-6 -->
    <br>
    <br>
    <div class="buttonsgohere">BUTTONS WILL GO HERE!
        <button data-search="ryu">Ryu</button>
        <button data-search="ken">Ken</button>
        <button data-search="gouki">Gouki</button>


    </div>

    <br>
    <br>

    <div class="gifsgohere">GIFs will appear here!



    </div>



    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>



    <script>
        var x;
        var fighters = ["Ryu", "Ken", "Gouki"];
        var fighter;

        function getX() {
            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + x +
                "&api_key=d3PnF7tQvIvNw9sUFnHYOpc7gGPUz5bv&limit=10";

            $.ajax({
                    url: queryURL,
                    method: 'GET'
                })
                .done(function (response) {
                    console.log(response);
                    var results = response.data;
                    // Looping through each result item
                    for (var i = 0; i < results.length; i++) {

                        // Creating and storing a div tag
                        var fighterDiv = $("<div>");

                        // Creating a paragraph tag with the result item's rating
                        var p = $("<p>").text("Rating: " + results[i].rating);

                        // Creating and storing an image tag
                        var fighterImage = $("<img>");
                        // Setting the src attribute of the image to a property pulled off the result item
                        fighterImage.attr("src", results[i].images.fixed_height_still.url);

                        // Appending the paragraph and image tag to the animalDiv
                        fighterDiv.append(p);
                        fighterDiv.append(fighterImage);

                        // Prependng the fighterDiv to the HTML page in the "#gifs-appear-here" div
                        $(".gifsgohere").prepend(fighterDiv);
                    }
                })
        }


        $("button").on("click", function (event) {
            event.preventDefault();
            x = $(this).data("search");
            getX();
            console.log(x);
            // This line will grab the text from the input box
            var fighter = $("data-name").val().trim();
            // The name from the textbox is then added to our array
            fighters.push(fighter);
            console.log(fighter);

            // calling renderButtons which handles the processing of our movie array
           // renderButtons();
        })


        //need to add new buttons when a name is submitted.  Refer to movie button layout solved.html. 06.AJAX.07Solved
        // Function for displaying movie data
        function renderButtons() {

            // Deleting the movie buttons prior to adding new movie buttons
            // (this is necessary otherwise we will have repeat buttons)
            $(".buttonsgohere").empty();

            // Looping through the array of movies
            for (var i = 0; i < fighters.length; i++) {

                // Then dynamicaly generating buttons for each movie in the array.
                // This code $("<button>") is all jQuery needs to create the start and end tag. (<button></button>)
                var a = $("<button>");
                // Adding a class
                a.addClass("fighter");
                // Adding a data-attribute with a value of the movie at index i
                a.attr("data-name", fighters[i]);
                // Providing the button's text with a value of the movie at index i
                a.text(fighters[i]);
                // Adding the button to the HTML
                $(".buttonsgohere").append(a);
            }
        }


        renderButtons();
        // This function handles events where one button is clicked
        $(".fighter").on("click", function(event) {
        //event.preventDefault() //prevents the form from trying to submit itself.
        // We're using a form so that the user can hit enter instead of clicking the button if they want
        event.preventDefault();

        // This line will grab the text from the input box
        var fighter = $("#fighterName").val().trim();
        // The movie from the textbox is then added to our array
        fighters.push(fighter);

        // calling renderButtons which handles the processing of our movie array
        renderButtons();
        })


        // Calling the renderButtons function at least once to display the initial list of movies
        //renderButtons();
    </script>






</body>

</html>